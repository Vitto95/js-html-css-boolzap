<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- css custom -->
    <link rel="stylesheet" href="assets/style/style.css" />
    <!-- font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
    />
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <title>Boolzap</title>
  </head>

  <body>
    <main>
      <!-- App -->
      <div class="container-chat" id="app">
        <!-- Menu Left -->
        <aside class="menu-left">
          <nav class="nav-top-menu">
            <div class="user-info">
              <img :src="imageLink('avatar', user.avatar, '.jpg')" alt="" />
              <span> {{user.name}} </span>
            </div>
            <div class="tools-top-menu">
              <i class="fas fa-circle-notch"></i>
              <i class="fas fa-comment-alt"></i>
              <i class="fas fa-ellipsis-v"></i>
            </div>
          </nav>
          <div class="notification-alert">
            <div class="container-bell">
              <i class="fas fa-bell-slash"></i>
            </div>
            <div class="text-notification">
              <p>Ricevi notifiche di nuovi messaggi</p>
              <p>Attiva notifiche desktop</p>
            </div>
          </div>
          <div class="contacts-menu">
            <div class="search-start-chat">
              <input
                type="text"
                placeholder="Cerca o inizia una nuova chat"
                v-model="searchContactName"
                @keyup="searchContact()"
                @keyup.delete="searchContact()"
              />
            </div>
            <div class="all-contacts">
              <ul>
                <!-- <li>
                  <img src="assets/img/avatar_1.jpg" alt="" />
                  <span>Michele</span>
                </li> TEMPLATE -->

                <li
                  v-for="(contact,index) in contacts"
                  @click="showMessages(index)"
                  v-show="contact.visible === true"
                >
                  <img
                    :src="imageLink('avatar', contact.avatar, '.jpg')"
                    alt=""
                  />
                  <span>{{contact.name}}</span>
                </li>
              </ul>
            </div>
          </div>
        </aside>

        <!-- Active Chat -->
        <div class="chat-content">
          <nav class="nav-top-chat">
            <div class="chat-info">
              <div class="avatar-chat">
                <img
                  :src="imageLink('avatar', contacts[activeContact].avatar, '.jpg')"
                  alt=""
                />
              </div>
              <div class="name-chat">
                <p>{{contacts[activeContact].name}}</p>
                <p>Ultimo accesso oggi alle</p>
              </div>
            </div>
          </nav>
          <div class="display-chat">
            <!-- output chat -->
            <div
              v-for="(messagesValue,messagesIndex) in contacts[activeContact].messages"
              class="container-messages"
              :class="messagesValue.status === 'sent' ? 'received-msg' : 'sent-msg' "
            >
              <span>{{messagesValue.text}}</span>
              <i
                class="fas fa-angle-down vg-dropdown-msg"
                @click="showDropdownMsg(messagesIndex)"
              ></i>
              <div class="date-msg">{{messagesValue.date}}</div>
              <div
                class="dropdown-messages"
                v-show="activeMsg === messagesIndex && isDropdownActive"
              >
                <ul class="dropdown-messages-list">
                  <li>Message info</li>
                  <li @click="deleteMsg()">Delete message</li>
                </ul>
              </div>
            </div>
            <!-- inputs chat -->
          </div>
          <div class="inputs-chat">
            <div class="emoticons">
              <i class="far fa-smile"></i>
            </div>
            <div class="text-messages">
              <input
                type="text"
                placeholder="Scrivi un messaggio"
                v-model="inputMsg"
                @keyup.enter="sendMsg()"
              />
            </div>
            <div class="audios">
              <i class="fas fa-microphone"></i>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- dayjs -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.4/dayjs.min.js"></script>
    <!-- script per italiano -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.4/locale/it.js"></script>
    <!-- uso globale it -->
    <script>
      dayjs.locale("it"); // use locale globally
    </script>
    <!-- script -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
